<!DOCTYPE html>
<html>
	<head>
		<script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

		<script>
			// Initialize Firebase
			var config = {
				apiKey: "AIzaSyCl2ihXRpdU0C708JxRPZo5_Qa3M3G613U",
				authDomain: "documentimprovement-ebf04.firebaseapp.com",
				databaseURL: "https://documentimprovement-ebf04.firebaseio.com",
				storageBucket: "documentimprovement-ebf04.appspot.com",
			};
			firebase.initializeApp(config);

			function writeNewPost() {
				// A post entry.
				var postData = {
					test: 'test'
				};

				// Get a key for a new Post.
				var newPostKey = firebase.database().ref().child('testpost').push().key;

				// Write the new post's data simultaneously in the posts list and the user's post list.
				var updates = {};
				updates['/testtest/' + newPostKey] = postData;
				//updates['/user-posts/' + uid + '/' + newPostKey] = postData;

				return firebase.database().ref().update(updates);
			}


			function toggleSignIn() {
				if (firebase.auth().currentUser) {
					// [START signout]
					firebase.auth().signOut();
					// [END signout]
					} else {
					// [START authanon]
					firebase.auth().signInAnonymously().catch(function(error) {
						// Handle Errors here.
						var errorCode = error.code;
						var errorMessage = error.message;
						// [START_EXCLUDE]
						if (errorCode === 'auth/operation-not-allowed') {
							alert('You must enable Anonymous auth in the Firebase Console.');
							} else {
							console.error(error);
						}
						// [END_EXCLUDE]
					});
					// [END authanon]
				}
				//document.getElementById('quickstart-sign-in').disabled = true;
			}

			$(document).ready(function() {
				$('#submit').click(function() {
					writeNewPost();
				});

				toggleSignIn();
			});

		</script>

	</head>
	<body>

		<button id='submit'> submit </button>
	</body>
</html>
